<div class="container mt-5">
  <h2 class="mb-4">Admin Movie Management</h2>

  <!-- Add Movie Form -->
  <div class="card p-4 mb-4">
    <h3 class="card-title">Add Movie</h3>
    <form (submit)="addMovie()" class="needs-validation" novalidate>
      <div class="mb-3">
        <label for="title" class="form-label">Title:</label>
        <input
          type="text"
          class="form-control"
          id="title"
          [(ngModel)]="newMovie.title"
          name="title"
          required />
        <div class="invalid-feedback">
          Please provide a movie title.
        </div>
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">Description:</label>
        <input
          type="text"
          class="form-control"
          id="description"
          [(ngModel)]="newMovie.description"
          name="description"
          required />
        <div class="invalid-feedback">
          Please provide a description.
        </div>
      </div>

      <div class="mb-3">
        <label for="image" class="form-label">Movie Poster:</label>
        <input
          type="file"
          class="form-control"
          id="image"
          (change)="onFileSelected($event)" />
        <!-- Image Preview -->
        <div *ngIf="imagePreview" class="mt-3">
          <img [src]="imagePreview" alt="Image Preview" style="width: 100px; height: auto;">
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Add Movie</button>
    </form>
  </div>

  <!-- Movie List -->
  <h2 class="my-4">Movie List</h2>

  <!-- Bootstrap row to create a grid layout -->
  <div class="row">
    <!-- Use Angular *ngFor to loop through the movies array -->
    <div class="col-md-4 mb-4" *ngFor="let movie of movies">
      <!-- Bootstrap card for each movie item -->
      <div class="card h-100">
        <a [routerLink]="['/movie', movie.id]">
          <img
            *ngIf="movie.imageId"
            [src]="getImageUrl(movie.imageId)"
            class="card-img-top"
            alt="{{ movie.title }}"
            style="object-fit: cover;" />
        </a>
        <div class="card-body">
          <a [routerLink]="['/movie', movie.id]" class="card-title h5">{{ movie.title }}</a>
          <p class="card-text">{{ movie.description }}</p>
        </div>
        <div class="card-footer">
          <button (click)="removeMovie(movie)" class="btn btn-danger">Remove</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Display a message if no movies are available -->
  <p *ngIf="movies.length === 0" class="text-muted">No movies available.</p>
</div>
